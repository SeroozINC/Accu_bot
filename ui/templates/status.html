{% extends "base.html" %}

{% block content %}
  <div class="card">
    <div class="card-header">
      <h2 class="card-title">Logi bota</h2>
      <a class="btn" href="/">Powrót</a>
    </div>

    <p class="card-subtitle">
      Ostatnie zdarzenia zapisane w bazie eventów bota.
    </p>

    {% if events and events|length > 0 %}
      <table class="table" style="margin-top: 14px;">
        <thead>
          <tr>
            <th>ID</th>
            <th>Poziom</th>
            <th>Event</th>
            <th>Czas (UTC)</th>
          </tr>
        </thead>
        <tbody>
          {% for e in events %}
            {% set level = e.get("level", "INFO") %}
            {% set lvl = level|lower %}
            <tr>
              <td>{{ e.get("id", "-") }}</td>
              <td>
                <span class="level
                  {{ 'error' if lvl == 'error'
                     else ('warn' if lvl in ['warn', 'warning']
                     else 'info') }}">
                  <span class="dot"></span>
                  {{ level }}
                </span>
              </td>
              <td>{{ e.get("event", "") }}</td>
              <td>{{ e.get("timestamp", "") }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <div class="alert">
        Brak zapisanych eventów.
      </div>
    {% endif %}
  </div>
{% endblock %}